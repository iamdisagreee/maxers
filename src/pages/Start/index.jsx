import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom' // если вы используете react-router
import './Start.css'
import Button from '../../components/Button'
import Input from '../../components/Input'
import searchIcon from '../../assets/svg/search.svg';

export default function Start() {
  const navigate = useNavigate() // если не используете react-router, используйте window.location.href = '/'
  // selectedRole: null | 'helper' | 'inneed'
  const [selectedRole, setSelectedRole] = useState(null)

  const chooseRole = (role) => {
    setSelectedRole(role)
  }

  const handleProceed = () => {
    if (!selectedRole) return
    // тут вы можете сохранить роль в state приложения / context / localStorage / api и т.д.
    // пример: localStorage.setItem('role', selectedRole)
    localStorage.setItem('role', selectedRole)
    // редирект на главную
    navigate('/') // если не хотите react-router, замените на window.location.href = '/'
  }

  return (
    <div className="startpage-wrapper">
      <div className='start-text'>
        <h1 className='h1 inter-700 gradient-primary'>Здравствуйте!</h1>
        <h2 className='h4 inter-700 gradient-primary'>давайте знакомиться</h2>
      </div>

      <div className="start-cards-wrapper">
        {/* Карточка "Мне нужна помощь" */}
        <div
          role="button"
          tabIndex={0}
          aria-pressed={selectedRole === 'inneed'}
          onClick={() => chooseRole('inneed')}
          onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') { chooseRole('inneed') } }}
          className={
            `start-card ${selectedRole === 'inneed' ? 'start-card-chosen' : 'gradient-primary-bg'}`
          }
          data-role="inneed"
        >
          {/* SVG ... (тот же, что у вас) */}
          <svg className="start-card__img" width="48" height="48" viewBox="0 0 48 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24.5007 21.3244C29.4927 16.3054 41.9757 25.0864 24.5007 36.3784C7.02569 25.0864 19.5087 16.3054 24.5007 21.3244Z" stroke="#A8D8B9" strokeWidth="3"/>
            <path d="M26.6218 4.87836C26.0593 4.31595 25.2963 4 24.5008 4C23.7053 4 22.9424 4.31595 22.3798 4.87836L2.43883 24.8164C2.15757 25.098 1.99972 25.4799 2 25.8779C2.00028 26.276 2.15867 26.6576 2.44033 26.9389C2.72199 27.2201 3.10385 27.378 3.5019 27.3777C3.89994 27.3774 4.28157 27.219 4.56283 26.9374L6.50083 24.9994V40.8784C6.50083 42.0718 6.97494 43.2164 7.81885 44.0603C8.66277 44.9043 9.80736 45.3784 11.0008 45.3784H38.0008C39.1943 45.3784 40.3389 44.9043 41.1828 44.0603C42.0267 43.2164 42.5008 42.0718 42.5008 40.8784V24.9994L44.4388 26.9374C44.7201 27.219 45.1017 27.3774 45.4998 27.3777C45.8978 27.378 46.2797 27.2201 46.5613 26.9389C46.843 26.6576 47.0014 26.276 47.0017 25.8779C47.002 25.4799 46.8441 25.098 46.5628 24.8164L39.5008 17.7574V7.87836C39.5008 7.48053 39.3428 7.099 39.0615 6.8177C38.7802 6.53639 38.3987 6.37836 38.0008 6.37836H35.0008C34.603 6.37836 34.2215 6.53639 33.9402 6.8177C33.6589 7.099 33.5008 7.48053 33.5008 7.87836V11.7574L26.6218 4.87836ZM39.5008 21.9994V40.8784C39.5008 41.2762 39.3428 41.6577 39.0615 41.939C38.7802 42.2203 38.3987 42.3784 38.0008 42.3784H11.0008C10.603 42.3784 10.2215 42.2203 9.94018 41.939C9.65887 41.6577 9.50083 41.2762 9.50083 40.8784V21.9994L24.5008 6.99936L39.5008 21.9994Z"/>
          </svg>

          <h5 className="h5 inter-700 color-white">Мне нужна помощь</h5>
          <p className='p inter-500 color-white'>Вы сможете создавать просьбы: сходить в магазин, помочь по дому или сопроводить на прогулке</p>
        </div>

        {/* Карточка "Я готов помочь" */}
        <div
          role="button"
          tabIndex={0}
          aria-pressed={selectedRole === 'helper'}
          onClick={() => chooseRole('helper')}
          onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') { chooseRole('helper') } }}
          className={
            `start-card ${selectedRole === 'helper' ? 'start-card-chosen' : 'gradient-primary-bg'}`
          }
          data-role="helper"
        >
          {/* SVG ... (тот же, что у вас) */}
          <svg className="start-card__img" width="48" height="48" viewBox="0 0 48 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_29_11)"><path d="M42.96 26.7469C42.4464 26.3513 41.8483 26.0798 41.2124 25.9536C40.5766 25.8274 39.9201 25.8499 39.2944 26.0194L38.4844 26.2069C42.5625 22.4156 44.625 18.6581 44.625 15C44.625 10.245 40.8019 6.375 36.1012 6.375C34.7756 6.36669 33.4662 6.66738 32.277 7.25321C31.0877 7.83904 30.0513 8.6939 29.25 9.75C28.4487 8.6939 27.4123 7.83904 26.223 7.25321C25.0338 6.66738 23.7244 6.36669 22.3988 6.375C17.6981 6.375 13.875 10.245 13.875 15C13.875 17.1337 14.5556 19.2169 15.9919 21.4425C14.8146 21.6241 13.7264 22.178 12.8869 23.0231L8.535 27.375H3C2.30381 27.375 1.63613 27.6516 1.14384 28.1438C0.651562 28.6361 0.375 29.3038 0.375 30V37.5C0.375 38.1962 0.651562 38.8639 1.14384 39.3562C1.63613 39.8484 2.30381 40.125 3 40.125H22.5C22.5923 40.125 22.6842 40.1137 22.7738 40.0913L34.7738 37.0913C34.8306 37.0763 34.8863 37.0575 34.9406 37.035L42.2194 33.9375L42.2812 33.9094C42.9248 33.588 43.476 33.108 43.8828 32.5148C44.2896 31.9215 44.5387 31.2344 44.6066 30.5183C44.6745 29.8022 44.559 29.0805 44.2709 28.4214C43.9828 27.7622 43.5317 27.1872 42.96 26.7506V26.7469ZM22.3988 8.625C23.636 8.60849 24.85 8.96152 25.8855 9.63892C26.921 10.3163 27.7307 11.2873 28.2113 12.4275C28.296 12.6338 28.4402 12.8103 28.6255 12.9345C28.8108 13.0587 29.0288 13.125 29.2519 13.125C29.4749 13.125 29.693 13.0587 29.8783 12.9345C30.0636 12.8103 30.2077 12.6338 30.2925 12.4275C30.773 11.2873 31.5828 10.3163 32.6183 9.63892C33.6537 8.96152 34.8678 8.60849 36.105 8.625C39.5025 8.625 42.375 11.5444 42.375 15C42.375 18.795 39.3412 23.0625 33.6 27.3281L30.8119 27.9694C31.0899 27.2316 31.1849 26.4374 31.0887 25.6549C30.9925 24.8724 30.7079 24.1249 30.2593 23.4765C29.8108 22.8281 29.2117 22.2982 28.5134 21.9322C27.8151 21.5662 27.0384 21.375 26.25 21.375H18.6881C16.9425 19.0631 16.125 17.0269 16.125 15C16.125 11.5444 18.9975 8.625 22.3988 8.625ZM2.625 37.5V30C2.625 29.9005 2.66451 29.8052 2.73484 29.7348C2.80516 29.6645 2.90054 29.625 3 29.625H7.875V37.875H3C2.90054 37.875 2.80516 37.8355 2.73484 37.7652C2.66451 37.6948 2.625 37.5995 2.625 37.5ZM41.3025 31.875L34.14 34.9256L22.3612 37.875H10.125V28.9669L14.4769 24.6131C14.7896 24.2987 15.1616 24.0495 15.5713 23.8799C15.981 23.7103 16.4203 23.6237 16.8638 23.625H26.25C26.9462 23.625 27.6139 23.9016 28.1062 24.3938C28.5984 24.8861 28.875 25.5538 28.875 26.25C28.875 26.9462 28.5984 27.6139 28.1062 28.1062C27.6139 28.5984 26.9462 28.875 26.25 28.875H21C20.7016 28.875 20.4155 28.9935 20.2045 29.2045C19.9935 29.4155 19.875 29.7016 19.875 30C19.875 30.2984 19.9935 30.5845 20.2045 30.7955C20.4155 31.0065 20.7016 31.125 21 31.125H27C27.0845 31.1251 27.1688 31.1157 27.2512 31.0969L39.8138 28.2075L39.8587 28.1963C40.3316 28.0673 40.8354 28.1177 41.2733 28.3376C41.7113 28.5575 42.0526 28.9315 42.2316 29.3877C42.4107 29.8439 42.4148 30.3502 42.2434 30.8093C42.0719 31.2684 41.7368 31.6479 41.3025 31.875Z" /></g>
            <defs>
              <clipPath id="clip0_29_11">
                <rect width="48" height="48"/>
              </clipPath>
            </defs>
          </svg>

          <h5 className="h5 inter-700 color-white">Я готов помочь</h5>
          <p className='p inter-500 color-white'>Вы будете видеть просьбы от людей поблизости и сможете откликаться на них, совершая добрые дела</p>
        </div>
      </div>

      <div className="start-form">
        <Input 
          gradient="lprimary-dprimary"
          iconAfter={<img src={searchIcon} alt="" style={{ width: 20, height: 20 }} />} 
          placeholder="Выберите ваш город" 
        />
        <Button
          size="large"
          mode="primary"
          appearance="dsecondary"
          stretched={true}
          loading={false}
          disabled={!selectedRole} // кнопка disabled пока роль не выбрана
          onClick={handleProceed}
        >
          Вперёд
        </Button>
      </div>
    </div>
  )
}
